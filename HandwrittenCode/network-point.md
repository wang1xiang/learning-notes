#### 简述 TCP 和 UDP 的区别

TCP 和 UDP 是 OSI 网络模型中的运输层的协议，TCP 提供可靠的通信传输，而 UDP 则常被用于让广播和细节控制控制交给应用的通信传输
区别：

- TCP 面向连接，UDP 面向非连接及发送数据前不需要 建立连接
- TCP 提供可靠的服务（数据传输），而 UDP 无法保证
- TCP 面向字节流，UDP 面向报文
- TCP 数据传输慢，UDP 数据传输快

#### 端口号及对应的服务

- 21 FTP 文件传输协议
- 22 SSH
- 23 Telnet 远程登陆服务
- 25 SMTP 简单邮件传输协议
- 53 DNS 域名服务器
- 80 HTTP 超文本传输协议
- 443 HTTPS
- 1080 Sockets
- 1521 Oracle 数据库
- 3306 Mysql 服务

#### TCP 三次握手

在 TCP/IP 协议中，TCP 协议提供可靠的连接服务，连接是通过三次握手进行初始化的，三次握手的目的是同步连接双方的序列号和确认好并交换 TCP 窗口大小信息

- 第一次握手：建立连接，客户端发送连接请求报文段，将 SYN 位置为 1

#### 私有保留地址

- A 类：10.0.0.0 - 10.255.255.255
- B 类：172.16.0.0 - 172.31.255.255
- C 类：192.168.0.0 - 192.168.255.255

#### OSI 七层模型

OSI 七层模型通过七个层次化的结构模型使不同的系统不同的网络之间实现可靠的通讯，因此其最主要的功能是帮助不同类型的主机实现数据传输

- 物理层：最底层，OSI 第一层，利用传输媒介为数据链路层提供物理连接，实现比特流的透明传输
- 数据链路层：负责建立和管理节点间的链路，通过各种控制协议，将有差错的物理信道变为无差错的、能可靠传输数据帧的数据链路
- 网络层：最复杂的一层，控制数据链路层和传输层之间的信息转发、建立、维持和终止网络的连接
- 传输层：OSI 下三层的蛀牙任务是数据通信，上三层主要任务是数据处理，而传输层是通信子网和资源子网的接口和桥梁，主要向用户提供可靠的端到端的差错和流量控制，保证报文的正确传输，常见协议：TCP/IP 协议
- 会话层：用户应用程序和网络之间的接口，组织和协调两个会话进行之间的通信，并对数据交换进行管理
- 表现层：对来自应用层的命令和数据进行解释，对各种语法赋予相应的含义，并按照一定的格式传送给会话层，主要功能：数据格式处理、数据编码、数据压缩和解压缩、数据加密和解密
- 应用层：计算机用户，以及各种应用程序和网络之间的接口，功能是直接向用户提供服务，完成用户希望在网络上完成的各种工作

OSI 七层模型只是一种理想的模型，一般网络系统只涉及其中的几层，很少有系统能够具有所有的七层，并完全遵循它的规定，在七层模型中。每一层都提供特殊的网络功能，下面 4 层（物理层、数据链路层、网络层和传输层）主要提供数据传输和交换功能，即以节点到节点之间的通信为主，第四层作为上下两部分的桥梁，是整个网络体系结构中最关键的部分，上三层（会话层、表示层和应用层）则以提供用户与应用程序之间的信息和数据处理功能为主

#### cdn 原理

内容分发网络（Content Delivery Network）：将网站的内容通过中心平台分发到部署在各地的 CDN 节点进行缓存，再通过负载均衡技术将用户的请求转发到就近的服务器上获取所需内容，降低网络堵塞，提供访问网站的响应速度

当用户访问使用 CDN 服务的网站时，本地 DNS 服务器通过 CNAME 方式将最终域名请求重定向到 CDN 服务。CDN 通过一组预先定义好的策略(如内容类型、地理区域、网络负载状况等)，将当时能够最快响应用户的 CDN 节点 IP 地址提供给用户，使用户可以以最快的速度获得网站内容。

#### Content-type 常见头

- application/x-www-form-urlencoded
  原生 form 表单，如果不设置 enctype（在发送到服务器之前应该如何对表单数据进行编码），那么最终会以 application/x-www-form-urlencoded （空格转换为 "+" 加号，特殊符号转换为 ASCII HEX 值）方式提交
- mulitpart/form-data
  表单上传文件时，需要设置 enctype 为 mulitpart/form-data
- application/json
  消息主体为序列化的 JSON 字符串，可以提交复杂的数据结构，适合 RESTfule 接口，各大抓包工具都会以树行结构展示 json 数据，很友好
- text/html
  HTTP 作为传输协议，XML 作为编码方式的远程调用规范

#### HTTP

- 常见 HTTP 方法
  GET：请求访问被 URI 识别的资源
  POST：传输信息给服务器
  PUT：传输文件，保存到对于 URI 位置
  HEAD：获得报文首部，不返回报文主体，一般用于验证 URI 是否有效
  DELETE：删除文件，与 PUT 方法相反，删除对应 URI 位置的文件
  OPTIONS：查询相应 URI 支持的 HTTP 方法
- GET 和 POST 区别

  - get 重点是获取资源，post 重点是向服务器发送数据
  - get 请求数据通过 URL 请求，请求过程用户可见，post 传输数据通过 http 的 post 机制，将字段与对应值封存在请求实体中发送给服务器，此过程用户不可见
  - get 传输数据量小，受 URL 长度限制，效率高；post 传输大量数据，上传文件时只能通过 post 方式
  - get 是不安全的，URL 可见，可能会泄漏私密信息
  - get 只支持 ASCII 字符，向服务器传输的中文字符可能会乱码

- 常见响应码
  - 1xx：提示信息，代表请求已接受，继续处理
  - 2xx：成功
  - 3xx：重定向
    http 1.0 里面 302 具有二义性，在 http 1.1 中加入 303 和 307 就是为了消除二义性
    - 302
    - 303
    - 307
  - 4xx：客户端错误--请求有语法错误或请求无法实现
    401：Unauthorized 表示用户没有权限（用户名，密码错误等等）
    403：Forbidden 表示用户有权限，但未被授权访问特定资源
  - 5xx：服务端错误

#### HTTPS

- HTTP 缺陷
  通信使用明文未加密，内容可能被窃听
  不验证通信方身份，可能遭到伪装
  无法验证报文完成性，可能被篡改

- HTTPS
  客户端浏览器在使用 HTTPS 方式与 Web 服务器通信阶段

  1. 证书验证
     浏览器发起 HTTPS 请求，要求与 Web 服务器建立 SSL 连接
     服务端返回 HTTPS 证书：Web 服务器收到客户端请求后，会生成一对公钥和私钥，并把公钥放在证书中发送给客户端浏览器
     客户端验证证书是否合法，如果不合法则提示告警
  2. 数据传输
     当证书验证合法后，在本地生成随机数
     通过公钥加密随机数，并把加密后的随机数传输到服务端
     服务端通过私钥对随机数进行解密
     服务端通过客户端传入的随机数构造对称加密算法，对返回结果内容进行加密后传输

  为什么数据传输是对称加密？

  1. 非对称加密的加解密效率低，而 http 请求中通常是有大量的交互，非对称加密效率无法接受
  2. 在 HTTPS 的场景中只有服务端保存私钥，一对公私钥只能实现简单的加解密，所以采用对称加密

  本地随机数被窃取怎么办？

  证书验证时采用非对称加密实现，传输过程采用对称加密，而其中对称加密算法中重要的随机数是由本地生成并存储在本地的，HTTPS 如何保证随机数不会被窃取？
  HTTPS 并不包含对随机数的安全保证，HTTPS 保证的只是传输过程安全，而随机数存储于本地，本地的安全属于另一范畴

  HTTPS 抓包
  HTTPS 的数据是加密的，常规下抓包工具代理请求后抓到的包内容是加密状态，无法直接查看。
